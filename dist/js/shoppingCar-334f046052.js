"use strict";$(function(){({init:function(){this.getEle(),this.bindEvent()},getEle:function(){this.allNum=$(".allNum"),this.price=$(".price2"),this.all=$(".all"),this.choose=$(".choose"),this.pic=$(".picImg"),this.title=$(".title"),this.jian=$(".jian"),this.text=$(".text"),this.plus=$(".plus"),this.count=$(".count"),this.remove=$(".remove"),this.delete=$(".delete"),this.yiNum=$(".yiNum"),this.totalPrice=$(".totalPrice")},bindEvent:function(){var s,a;localStorage.getItem("carList")?(s=JSON.parse(localStorage.getItem("carList")),a=s.length,$.ajax({url:"./data/samsung.json",type:"get",dataType:"json",success:function(e){$(e).each(function(e,l){$(s).each(function(e,t){var c,i;t.id===l.id&&(c='\n                                    <li>\n                                            <input type="checkbox" name="" class="choose" id=""> \n                                            <div class="pic">\n                                                <img class="picImg" src="'.concat(l.src,'" alt="">\n                                            </div>\n                                            \n                                            <p class="title">').concat(l.tit,'</p>\n                                            <p class="detail">\n                                                网络类型：SA/NSA双模(5G)<br/>\n                                                机身颜色：7号色<br/>\n                                                套餐类型：官方标配<br/>\n                                                存储容量：8+128GB<br/>\n                                            </p>\n                                            <span class="price">').concat(l.price,'</span>\n                                            <div class="num">\n                                                <input class="jian" type="button" value="-">\n                                                <input type="text" class="numV" value="').concat(t.num,'">\n                                                <input type="button" value="+" class="plus">\n                                            </div>\n                                            <span class="count">￥').concat(l.price*t.num,'.00</span>\n                                            <span class="remove" code="').concat(l.id,'">删除</span>\n                                        </li>\n                                    '),$(".list").append(c),i=!0,$(".list .choose").each(function(e,t){t.checked||(i=!1)}),i?($(".all")[0].checked=!0,$(".all2")[0].checked=!0):($(".all")[0].checked=!1,$(".all2")[0].checked=!1))})})}}),$(".list").on("click",".remove",function(){a--;var c=$(this).attr("code");$(s).each(function(e,t){t.id!==Number(c)||s.splice(t.index,1)}),console.log(s),localStorage.setItem("carList",JSON.stringify(s));var i=[];localStorage.getItem("carNum")&&(i=JSON.parse(localStorage.getItem("carNum"))),$(i).each(function(e,t){t.id!==Number(c)||i.splice(t.index,1)}),localStorage.setItem("carNum",JSON.stringify(i)),$(".carNum").text(i.length),$(this).parent().remove();var l=!0,n=0;$(".list .choose").each(function(e,t){t.checked?n+=Number($(this).siblings(".count")[0].innerText.slice(1)):l=!1}),$(".totalPrice").text(n),$(".price2").text(n),l?($(".all")[0].checked=!0,$(".all2")[0].checked=!0,$(".list .choose")[0]||($(".all")[0].checked=!1,$(".all2")[0].checked=!1)):($(".all")[0].checked=!1,$(".all2")[0].checked=!1),0===s.length&&(localStorage.removeItem("carList"),$(".list").append('<li style="text-align:center;line-height:80px;">购物车是空的！</li>')),location.reload()}),$(".tit").on("click",".all",function(){console.log(123),$(".list .choose").each(function(e,t){t.checked=$(".all")[0].checked}),$(".all2")[0].checked=$(this)[0].checked;var c=0;$(".list .choose").each(function(e,t){t.checked?($(".yiNum").text(a),c+=Number($(this).siblings(".count")[0].innerText.slice(1))):$(".yiNum").text("0")}),$(".totalPrice").text("￥"+c+".00"),$(".price2").text(c+".00")}),$(".titB").on("click",".all2",function(){console.log(123),$(".list .choose").each(function(e,t){t.checked=$(".all2")[0].checked}),console.log($(".all2")[0].checked),$(".all")[0].checked=$(".all2")[0].checked;var c=0;$(".list .choose").each(function(e,t){t.checked?($(".yiNum").text(a),c+=Number($(this).siblings(".count")[0].innerText.slice(1))):$(".yiNum").text("0")}),$(".totalPrice").text("￥"+c+".00"),$(".price2").text(c+".00")}),$(".titB").on("click",".delete",function(){console.log(123),$(".list .choose").each(function(e,t){var c,i,l,n;t.checked&&(a--,c=$(this).siblings(".remove").attr("code"),$(s).each(function(e,t){t.id!==Number(c)||s.splice(t.index,1)}),console.log(s),localStorage.setItem("carList",JSON.stringify(s)),i=[],localStorage.getItem("carNum")&&(i=JSON.parse(localStorage.getItem("carNum"))),$(i).each(function(e,t){t.id!==Number(c)||i.splice(t.index,1)}),localStorage.setItem("carNum",JSON.stringify(i)),$(".carNum").text(i.length),$(this).parent().remove(),l=!0,n=0,$(".list .choose").each(function(e,t){t.checked?n+=Number($(this).siblings(".count")[0].innerText.slice(1)):l=!1}),$(".totalPrice").text(n),$(".price2").text(n),l?($(".all")[0].checked=!0,$(".all2")[0].checked=!0,$(".list .choose")[0]||($(".all")[0].checked=!1,$(".all2")[0].checked=!1)):($(".all")[0].checked=!1,$(".all2")[0].checked=!1),0===s.length&&(localStorage.removeItem("carList"),$(".list").append('<li style="text-align:center;line-height:80px;">购物车是空的！</li>')),location.reload())})}),$(".list").on("click",".choose",function(){var c=!0,i=0,l=0;$(".list .choose").each(function(e,t){t.checked?(l++,i+=Number($(this).siblings(".count")[0].innerText.slice(1))):c=!1}),$(".totalPrice").text("￥"+i+".00"),$(".price2").text(i+".00"),c?($(".all")[0].checked=!0,$(".all2")[0].checked=!0):($(".all")[0].checked=!1,$(".all2")[0].checked=!1),$(".yiNum").text(l)}),$(".list").on("click",".jian",function(){var c,e=Number($(this).siblings(".numV")[0].value);--e<1&&(e=1),$(this).siblings(".numV")[0].value=e,$(this).parent().siblings(".count").text("￥"+e*$(this).parent().siblings(".price")[0].innerText+".00"),$(this).parent().siblings(".choose")[0].checked&&(c=0,$(".list .choose").each(function(e,t){t.checked?c+=Number($(this).siblings(".count")[0].innerText.slice(1)):flag=!1}),$(".totalPrice").text("￥"+c+".00"),$(".price2").text(c+".00"))}),$(".list").on("click",".plus",function(){var c,e=Number($(this).siblings(".numV")[0].value);99<++e&&(e=99),$(this).siblings(".numV")[0].value=e,$(this).parent().siblings(".count").text("￥"+e*$(this).parent().siblings(".price")[0].innerText+".00"),$(this).parent().siblings(".choose")[0].checked&&(c=0,$(".list .choose").each(function(e,t){t.checked?c+=Number($(this).siblings(".count")[0].innerText.slice(1)):flag=!1}),$(".totalPrice").text("￥"+c+".00"),$(".price2").text(c+".00"))}),$(".allNum").text(a)):$(".list").append('<li style="text-align:center;line-height:80px;">购物车是空的！</li>'),$(".tit").on("click",".all",function(){$(".all2")[0].checked=$(this)[0].checked}),$(".tit").on("click",".all2",function(){$(".all")[0].checked=$(this)[0].checked})}}).init()});