"use strict";$(function(){({init:function(){this.getEle(),this.bindEvent()},getEle:function(){this.$login=$(".login"),this.$register=$(".register"),this.$loginCon=$(".loginCon"),this.$logPhone=$("#logPhone"),this.$logPass=$("#logPass"),this.$logBtn=$(".logBtn"),this.$forget=$(".forget"),this.$registerCon=$(".registerCon"),this.$regPhone=$("#regPhone"),this.$regPass=$("#regPass"),this.$regName=$("#regName"),this.$regBtn=$(".regBtn"),this.$error=$(".error"),this.$tip=$(".tip")},bindEvent:function(){var s=this;localStorage.getItem("name")?(this.$logPhone.val(localStorage.getItem("phone")),this.$logPass.val(localStorage.getItem("pass"))):(this.$logPhone.val(""),this.$logPass.val("")),console.log(localStorage.getItem("name")),this.$login.click(function(){s.$login.css({"border-bottom":"2px solid #000"}),s.$loginCon.css({display:"block"}),s.$registerCon.css({display:"none"}),s.$register.css({"border-bottom":"none"})}),this.$register.click(function(){s.$register.css({"border-bottom":"2px solid #000"}),s.$registerCon.css({display:"block"}),s.$loginCon.css({display:"none"}),s.$login.css({"border-bottom":"none"})}),this.$logBtn.click(function(){var e=s.$logPhone[0].value,t=s.$logPass[0].value;return e.trim()&&e.trim()?(s.$error.css({display:"none"}),/^1[3456789]\d{9}$/.test(e)?void $.ajax({url:"./php/login.php",type:"get",data:{type:"login",phone:e,pass:t},dataType:"json",success:function(e){s.$error.css({display:"none"}),e.result?(s.$error.css({display:"block"}),s.$tip.text("手机号或密码错误")):(localStorage.setItem("name",e[0].name),localStorage.setItem("pass",e[0].pass),localStorage.setItem("phone",e[0].phone),location.href="./index.html")}}):(s.$error.css({display:"block"}),void s.$tip.text("请输入正确格式手机号"))):(s.$error.css({display:"block"}),void s.$tip.text("手机号或密码不能为空"))}),this.$regBtn.click(function(){var e=s.$regPhone[0].value,t=s.$regPass[0].value,o=s.$regName[0].value;return e.trim()&&t.trim()&&o.trim()?(s.$error.css({display:"none"}),/^1[3456789]\d{9}$/.test(e)?/.{2,10}/.test(o)?void $.ajax({url:"./php/login.php",type:"get",data:{type:"add",phone:e,pass:t,name:o},dataType:"json",success:function(e){s.$error.css({display:"none"}),e.result?2===e.result?(s.$error.css({display:"block"}),s.$tip.text("手机号已被注册")):4===e.result&&(s.$error.css({display:"block"}),s.$tip.text("注册失败")):(alert("注册成功,即刻登录吧"),localStorage.setItem("name",e.name),localStorage.setItem("pass",e.pass),localStorage.setItem("phone",e.phone),location.reload(),s.$logPhone.val(localStorage.getItem("phone")),s.$logPass.val(localStorage.getItem("pass")))}}):(s.$error.css({display:"block"}),void s.$tip.text("用户名需2-10位")):(s.$error.css({display:"block"}),void s.$tip.text("请输入正确格式手机号"))):(s.$error.css({display:"block"}),void s.$tip.text("手机号、密码或用户名不能为空"))})}}).init()});